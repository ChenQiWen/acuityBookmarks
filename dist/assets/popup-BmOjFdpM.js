import{d as w,r as l,o as A,c as m,a as f,b as e,e as C,t as a,f as v,w as _,_ as M,g as B}from"./_plugin-vue_export-helper-CNXEOTey.js";const y={class:"popup-container"},P={class:"popup-content"},S={key:0,id:"quickAddSection"},q={class:"card-panel"},x={class:"truncate"},I={class:"truncate grey-text"},T=["disabled"],D={class:"material-icons left"},N={id:"dashboardSection"},R={class:"stats-row"},V={class:"stat-item"},W={class:"stat-value"},$={class:"stat-item"},E={class:"stat-value"},L={class:"last-processed-info"},j={class:"footer-actions"},z=w({__name:"Popup",setup(G){const o=l(null),i=l({bookmarks:0,folders:0}),d=l("尚未进行过AI整理"),n=l(!1);function u(t){let s=0,r=0;for(const c of t)if(c.url)s++;else if(c.children){r++;const p=u(c.children);s+=p.bookmarks,r+=p.folders}return{bookmarks:s,folders:r}}function k(){if(!o.value)return;n.value=!0;const t={title:o.value.title,url:o.value.url,id:`temp-${Date.now()}`};chrome.runtime.sendMessage({action:"quickAddBookmark",bookmark:t},s=>{s&&s.success?setTimeout(()=>window.close(),500):n.value=!1})}function h(){chrome.runtime.sendMessage({action:"showManagementPage"}),window.close()}function b(){chrome.runtime.sendMessage({action:"startRestructure"}),window.close()}function g(){chrome.runtime.sendMessage({action:"clearCacheAndRestructure"}),window.close()}return A(()=>{chrome.tabs.query({active:!0,currentWindow:!0},t=>{t[0]&&t[0].url&&!t[0].url.startsWith("chrome://")&&(o.value=t[0])}),chrome.bookmarks.getTree(t=>{const s=u(t);s.folders=s.folders>0?s.folders-1:0,i.value=s}),chrome.storage.local.get("processedAt",t=>{if(t.processedAt){const s=new Date(t.processedAt);d.value=`上次整理于: ${s.toLocaleString()}`}})}),(t,s)=>(f(),m("div",y,[s[7]||(s[7]=e("div",{class:"popup-header"},[e("div",{class:"popup-icon"},[e("i",{class:"material-icons"},"auto_awesome")]),e("h4",null,"AcuityBookmarks"),e("p",{class:"popup-subtitle"},"您的智能书签助手")],-1)),e("div",P,[o.value?(f(),m("div",S,[s[0]||(s[0]=e("p",{class:"section-title"},"快速收藏当前页面",-1)),e("div",q,[e("p",x,a(o.value.title),1),e("p",I,a(o.value.url),1)]),e("button",{class:"btn",onClick:k,disabled:n.value},[e("i",D,a(n.value?"hourglass_empty":"add_circle"),1),v(" "+a(n.value?"添加中...":"添加到AI建议"),1)],8,T)])):C("",!0),e("div",N,[s[6]||(s[6]=e("p",{class:"section-title"},"概览",-1)),e("div",R,[e("div",V,[s[1]||(s[1]=e("i",{class:"material-icons"},"bookmark_border",-1)),e("span",W,a(i.value.bookmarks),1),s[2]||(s[2]=e("span",null,"书签总数",-1))]),e("div",$,[s[3]||(s[3]=e("i",{class:"material-icons"},"create_new_folder",-1)),e("span",E,a(i.value.folders),1),s[4]||(s[4]=e("span",null,"文件夹",-1))])]),e("div",L,a(d.value),1),e("button",{class:"btn blue",onClick:h},[...s[5]||(s[5]=[e("i",{class:"material-icons left"},"settings",-1),v("查看和管理 ",-1)])]),e("a",{href:"#!",onClick:_(b,["prevent"]),class:"btn-flat right"},"重新生成建议")]),e("div",j,[e("a",{href:"#!",onClick:_(g,["prevent"]),class:"clear-cache-btn"},"清除缓存并重新生成")])])]))}}),F=M(z,[["__scopeId","data-v-f69aea4d"]]);B(F).mount("#app");
