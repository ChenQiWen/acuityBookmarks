import{d as B,r as k,h as x,c as r,a as o,F as A,i as F,b as s,j as b,e as L,t as m,_ as Z,k as N,o as S,f as _,g as V}from"./_plugin-vue_export-helper-CNXEOTey.js";const I="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='_图层_2'%20data-name='图层%202'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20507%20507'%3e%3cdefs%3e%3cstyle%3e%20.cls-1%20{%20fill:%20%231f7bbd;%20}%20.cls-2%20{%20fill:%20%23424243;%20}%20.cls-3%20{%20fill:%20%23cfcfd0;%20}%20.cls-4%20{%20fill:%20%23c9c9c9;%20}%20.cls-5%20{%20fill:%20%231a7ac1;%20}%20.cls-6%20{%20fill:%20%23434445;%20}%20.cls-7%20{%20fill:%20%23424244;%20}%20.cls-8%20{%20fill:%20%231878c0;%20}%20.cls-9%20{%20fill:%20%231a79be;%20}%20.cls-10%20{%20fill:%20%23227dc0;%20}%20%3c/style%3e%3c/defs%3e%3cg%20id='_图层_1-2'%20data-name='图层%201'%3e%3cg%3e%3cpath%20class='cls-10'%20d='M507,158v1l-73,23c-4.55-1.27-6.82-2.8-6-8,17.27-3.81,34.43-8.21,51.81-11.69,8.97-1.8,18.03-4.27,27.19-4.31Z'/%3e%3cpath%20class='cls-1'%20d='M55,278c-.47,6.46,5.84,6.86,5,12-20.06.83-40.28,4.58-60,8v-2c18.4-5.74,36.72-11.89,55-18Z'/%3e%3cpath%20class='cls-3'%20d='M396,0v1c-60.65.08-121.35-.11-182,0V0h182Z'/%3e%3cpath%20class='cls-4'%20d='M214,0v1c-33.65.06-67.35-.04-101,0V0h101Z'/%3e%3cpath%20class='cls-8'%20d='M336,196l-1.01,4.99c8.16,1.69,16.02,1.37,13.01,12.01h-1c-1.57-2.31-4.54-2.1-7-1.99v1.98s4,1.01,4,1.01c-1.79.67-4,2.25-6,3-.35-8.9-12.82-4.73-10,3-1.11.42-2.14.67-3,1,.19-2.32-3.5-5.21-5.35-4.84l-6.22,4.83,1.57,4c-1.65.63-3.32,1.35-5,2l-7-2v5c-53.77,21.01-107.17,43.51-159.36,68.14-7.31,3.45-20.53,11.89-27.25,13.77-1.95.54-1.13-.26-1.49-1.28-.7-1.98-.76-4.31-1.69-6.33-6.99-15.29-38.99-14.88-53.21-14.29.84-5.14-5.47-5.54-5-12,83.2-27.82,166.92-53.29,252-75l4,1v-2c9.06-2.36,16.84-3.95,25-6Z'/%3e%3cpath%20class='cls-9'%20d='M428,174c-.82,5.2,1.45,6.73,6,8-9.28,5.13-20.28,6.62-30,10,.02-2.65.85-3.37-2.43-2.92-4.38.59-5.51,2.52-.57,3.92-17.64,6.16-34.95,14.63-53,20,3.02-10.64-4.85-10.32-13.01-12.01l1.01-4.99c18.93-4.75,37.89-9.53,57-14l2-1c10.97-2.55,22.02-4.58,33-7Z'/%3e%3cpath%20class='cls-9'%20d='M325,221c-3.15,1.2-6.68,2.72-10,4l-1.57-4,6.22-4.83c1.85-.37,5.54,2.52,5.35,4.84Z'/%3e%3cpath%20class='cls-5'%20d='M338,217c-2.83,1.06-7.18,1.93-10,3-2.82-7.73,9.65-11.9,10-3Z'/%3e%3cpath%20class='cls-9'%20d='M310,227c-2.22.86-4.56,2.05-7,3v-5s7,2,7,2Z'/%3e%3cpath%20class='cls-10'%20d='M401,193c-4.94-1.4-3.81-3.33.57-3.92,3.28-.44,2.44.27,2.43,2.92-1,.35-2.01.65-3,1Z'/%3e%3cpath%20class='cls-9'%20d='M347,213c-.79,1.08-2.19.7-3,1l-4-1.01v-1.98c2.46-.1,5.43-.32,7,1.99Z'/%3e%3cpath%20class='cls-7'%20d='M395,507h-3c-5.93-3.35-11.17-7.8-16.48-12.02-36.76-29.3-74.45-64.91-112.05-91.95-9.03-6.5-13.44-5.27-21.95,1.01-40.31,29.73-77.68,68.41-118.05,97.95-2.75,2.01-5.52,3.42-8.48,5.02h-4c-4.68-2.3-11-9.14-11-14.5v-188.5c11.93,2.14,6.05,16.82,2,23.99l43.98-20.5-18.98,52.51h49l24.46-67.07,102.44.17,23.6,66.9h48.5l-46.07-130.43,78.06-28.57c-.73,5.29.85,10.38,1.06,15.45,3.73,89.75-2.92,182.07-.01,272.08-.73,9.3-3.53,15.86-13.04,18.46Z'/%3e%3cpath%20class='cls-2'%20d='M113,1c33.65-.04,67.35.06,101,0,60.65-.11,121.35.08,182,0,7.82,1.05,11.28,9.51,11.99,16.51,2.5,24.74-2.64,52.81.06,78.03l-.15,73.36-95.81,22-40.2-111.78-43.23-.16-55.18,151.03-73.48,23.02V15.5c0-5.44,6.48-15.2,13-14.5Z'/%3e%3cpolygon%20class='cls-6'%20points='268%20203.99%20229%20213.99%20250.5%20153%20268%20203.99'/%3e%3cpath%20class='cls-9'%20d='M311,202v2s-4-1-4-1c1.32-.34,2.69-.66,4-1Z'/%3e%3cpath%20class='cls-10'%20d='M395,181l-2,1c.11-.03.67-.69,2-1Z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",R={class:"bookmark-tree"},E={key:0,class:"folder-container"},U=["onClick"],j={class:"material-icons"},D={class:"folder-title"},z={key:1,class:"bookmark-item"},O=["src"],q=["href","title"],G=B({name:"BookmarkTree",__name:"BookmarkTree",props:{nodes:{},isProposal:{type:Boolean}},setup(T){const i=k({}),v=l=>{i.value[l]=!i.value[l]},d=l=>l?`https://www.google.com/s2/favicons?domain=${new URL(l).hostname}&sz=16`:"/images/icon16.png";return(l,f)=>{const g=x("BookmarkTree",!0);return o(),r("ul",R,[(o(!0),r(A,null,F(l.nodes,a=>(o(),r("li",{key:a.id},[a.children?(o(),r("div",E,[s("div",{class:"folder-header",onClick:y=>v(a.id)},[s("i",j,m(i.value[a.id]?"folder":"folder_open"),1),s("span",D,m(a.title||"未命名"),1)],8,U),i.value[a.id]?L("",!0):(o(),b(g,{key:0,nodes:a.children,"is-proposal":l.isProposal},null,8,["nodes","is-proposal"]))])):(o(),r("div",z,[s("img",{src:d(a.url),class:"favicon",alt:""},null,8,O),s("a",{href:a.url,target:"_blank",class:"bookmark-title",title:a.title},m(a.title),9,q)]))]))),128))])}}}),M=Z(G,[["__scopeId","data-v-acbf2382"]]),H={class:"management-body"},J={class:"main-content"},K={class:"stats-section"},Q={class:"stats-card"},W={class:"stats-content"},X={class:"stats-number"},Y={class:"stats-card"},ss={class:"stats-content"},es={class:"stats-number"},ts={class:"stats-card"},ls={class:"stats-content"},as={class:"stats-number"},os={class:"comparison-section"},cs={class:"comparison-panel"},is={class:"panel-content"},ns={key:0,class:"loading-state"},rs={key:1,class:"loading-state"},ds={class:"comparison-panel"},ps={class:"panel-content"},vs={key:0,class:"loading-state"},hs={key:1,class:"loading-state"},us=B({__name:"Management",setup(T){const i=N({totalFolders:0,totalBookmarks:0,aiProcessed:0}),v=k([]),d=k({id:"root-0",title:"root",children:[],isRoot:!0}),l=k(!0),f=k(!0);function g(t){const e={title:"root",children:[],isRoot:!0,id:"root-0"},u=n=>{let c=e;return n.forEach(p=>{let h=c.children?.find(w=>w.title===p&&w.children);h||(h={title:p,children:[],id:`folder-${Date.now()}-${Math.random()}`},c.children||(c.children=[]),c.children.push(h)),c=h}),c};if(t.书签栏&&typeof t.书签栏=="object")for(const n in t.书签栏){const c=n.split(" / "),p=u(["书签栏",...c]),h=t.书签栏[n];Array.isArray(h)&&p.children&&p.children.push(...h)}if(t.其他书签&&Array.isArray(t.其他书签)){const n=u(["其他书签"]);n.children&&n.children.push(...t.其他书签)}return e}function a(){function t(e){let u=0,n=0;return e.forEach(c=>{if(c.url)n++;else if(c.children){u++;const p=t(c.children);u+=p.folders,n+=p.bookmarks}}),{folders:u,bookmarks:n}}if(v.value.length>0){const e=t(v.value);i.totalFolders=e.folders,i.totalBookmarks=e.bookmarks}if(d.value.children){const e=t(d.value.children);i.aiProcessed=e.bookmarks}}S(()=>{typeof chrome<"u"&&chrome.storage&&chrome.storage.local?chrome.storage.local.get(["originalTree","newProposal"],t=>{t.originalTree&&(v.value=t.originalTree[0]?.children||[]),l.value=!1,t.newProposal&&(d.value=g(t.newProposal)),f.value=!1,a()}):(console.warn("Not in extension context. Loading mock data."),l.value=!1,f.value=!1)});const y=()=>alert("功能待实现: 应用新结构"),$=()=>alert("功能待实现: 预览更改"),C=()=>alert("功能待实现: 导出配置"),P=()=>{alert("正在请求后台重新生成建议..."),chrome.runtime.sendMessage({action:"startRestructure"})};return(t,e)=>(o(),r("div",H,[s("header",{class:"app-bar"},[s("div",{class:"app-bar-content"},[e[5]||(e[5]=s("div",{class:"app-bar-left"},[s("img",{src:I,alt:"AcuityBookmarks Logo",class:"app-logo"}),s("h1",{class:"app-title"},"AcuityBookmarks"),s("span",{class:"app-subtitle"},"智能书签重构建议")],-1)),s("div",{class:"app-bar-right"},[e[4]||(e[4]=s("input",{id:"search",type:"search",placeholder:"搜索书签...",class:"search-input"},null,-1)),s("button",{class:"btn-icon",onClick:P,title:"重新生成"},[...e[0]||(e[0]=[s("i",{class:"material-icons"},"refresh",-1)])]),s("div",{class:"header-actions"},[s("button",{class:"btn primary",onClick:y},[...e[1]||(e[1]=[s("i",{class:"material-icons left"},"check",-1),_(" 应用新结构 ",-1)])]),s("button",{class:"btn",onClick:$},[...e[2]||(e[2]=[s("i",{class:"material-icons left"},"preview",-1),_(" 预览更改 ",-1)])]),s("button",{class:"btn",onClick:C},[...e[3]||(e[3]=[s("i",{class:"material-icons left"},"download",-1),_(" 导出配置 ",-1)])])])])])]),s("main",J,[s("section",K,[s("div",Q,[e[7]||(e[7]=s("div",{class:"stats-icon"},[s("i",{class:"material-icons"},"folder")],-1)),s("div",W,[s("div",X,m(i.totalFolders),1),e[6]||(e[6]=s("div",{class:"stats-label"},"文件夹",-1))])]),s("div",Y,[e[9]||(e[9]=s("div",{class:"stats-icon"},[s("i",{class:"material-icons"},"bookmark")],-1)),s("div",ss,[s("div",es,m(i.totalBookmarks),1),e[8]||(e[8]=s("div",{class:"stats-label"},"书签",-1))])]),s("div",ts,[e[11]||(e[11]=s("div",{class:"stats-icon"},[s("i",{class:"material-icons"},"auto_fix_high")],-1)),s("div",ls,[s("div",as,m(i.aiProcessed),1),e[10]||(e[10]=s("div",{class:"stats-label"},"AI分类",-1))])])]),s("section",os,[s("div",cs,[e[12]||(e[12]=s("div",{class:"panel-header"},[s("h2",{class:"panel-title"},[s("i",{class:"material-icons"},"folder_open"),_(" 当前结构")]),s("span",{class:"panel-subtitle"},"您现有的书签组织")],-1)),s("div",is,[l.value?(o(),r("div",ns,"加载中...")):v.value.length===0?(o(),r("div",rs,"无数据显示")):(o(),b(M,{key:2,nodes:v.value},null,8,["nodes"]))])]),e[14]||(e[14]=s("div",{class:"comparison-divider"},[s("div",{class:"divider-icon"},[s("i",{class:"material-icons"},"arrow_forward")])],-1)),s("div",ds,[e[13]||(e[13]=s("div",{class:"panel-header"},[s("h2",{class:"panel-title"},[s("i",{class:"material-icons"},"auto_awesome"),_(" AI优化建议")]),s("span",{class:"panel-subtitle"},"基于内容的智能分类")],-1)),s("div",ps,[f.value?(o(),r("div",vs,"AI分析中...")):!d.value.children||d.value.children.length===0?(o(),r("div",hs,"无建议")):(o(),b(M,{key:2,nodes:d.value.children,"is-proposal":!0},null,8,["nodes"]))])])])])]))}}),ms=Z(us,[["__scopeId","data-v-e4213150"]]);V(ms).mount("#app");
