# æµ‹è¯•æ•°æ®æ’å…¥æŒ‡å—

## ğŸ¯ ç”¨æˆ· UUID è¯´æ˜

**é‡è¦ï¼š** Supabase çš„ç”¨æˆ· UUID å¿…é¡»ç”± Supabase Auth ç”Ÿæˆï¼Œä¸èƒ½éšæ„ç”Ÿæˆï¼

### ä¸ºä»€ä¹ˆä¸èƒ½éšæ„ç”Ÿæˆ UUIDï¼Ÿ

1. **å¤–é”®çº¦æŸ**ï¼š`subscriptions` å’Œ `payment_records` è¡¨éƒ½æœ‰å¤–é”®æŒ‡å‘ `auth.users(id)`
2. **å®‰å…¨æ€§**ï¼šSupabase Auth ä¼šéªŒè¯ç”¨æˆ·èº«ä»½å’Œæƒé™
3. **æ•°æ®ä¸€è‡´æ€§**ï¼šç¡®ä¿ç”¨æˆ·æ•°æ®çš„ä¸€è‡´æ€§

## ğŸ“‹ æ¨èæ–¹å¼ï¼šè‡ªåŠ¨è·å–ç”¨æˆ· ID

### æ–¹å¼ 1ï¼šä½¿ç”¨è‡ªåŠ¨è·å–è„šæœ¬ï¼ˆæœ€ç®€å•ï¼‰âœ…

**æ–‡ä»¶ï¼š** `backend/insert-test-data-quick.sql`

è¿™ä¸ªè„šæœ¬ä¼šï¼š

1. âœ… è‡ªåŠ¨è·å–ç¬¬ä¸€ä¸ªå­˜åœ¨çš„ç”¨æˆ· ID
2. âœ… å¦‚æœæ²¡æœ‰ç”¨æˆ·ï¼Œä¼šæç¤ºä½ å…ˆæ³¨å†Œä¸€ä¸ªæµ‹è¯•ç”¨æˆ·
3. âœ… æ’å…¥æµ‹è¯•è®¢é˜…å’Œæ”¯ä»˜è®°å½•

**æ­¥éª¤ï¼š**

1. å¦‚æœè¿˜æ²¡æœ‰ç”¨æˆ·ï¼Œå…ˆåœ¨å‰ç«¯æ³¨å†Œé¡µé¢æ³¨å†Œä¸€ä¸ªæµ‹è¯•ç”¨æˆ·
2. æ‰§è¡Œ `insert-test-data-quick.sql`
3. å®Œæˆï¼

### æ–¹å¼ 2ï¼šæ‰‹åŠ¨æŒ‡å®šç”¨æˆ· ID

å¦‚æœä½ æƒ³ä¸ºç‰¹å®šç”¨æˆ·æ’å…¥æµ‹è¯•æ•°æ®ï¼š

1. **è·å–ç”¨æˆ· IDï¼š**

   ```sql
   SELECT id, email FROM auth.users LIMIT 5;
   ```

2. **ä¿®æ”¹ SQLï¼š**
   åœ¨ `insert-test-data-quick.sql` ä¸­ï¼Œå°†ï¼š
   ```sql
   SELECT id INTO test_user_id FROM auth.users LIMIT 1;
   ```
   æ”¹ä¸ºï¼š
   ```sql
   SELECT id INTO test_user_id FROM auth.users WHERE email = 'your-test-email@example.com';
   ```

### æ–¹å¼ 3ï¼šåˆ›å»ºæµ‹è¯•ç”¨æˆ·ï¼ˆå¦‚æœéœ€è¦ï¼‰

**æ–‡ä»¶ï¼š** `backend/create-test-user.sql`

**æ–¹æ³• Aï¼šä½¿ç”¨ Supabase Dashboardï¼ˆæ¨èï¼‰**

1. Supabase Dashboard â†’ Authentication â†’ Users
2. ç‚¹å‡» "Add User"
3. è¾“å…¥é‚®ç®±å’Œå¯†ç 
4. åˆ›å»ºå®Œæˆåï¼Œç”¨æˆ· ID ä¼šè‡ªåŠ¨ç”Ÿæˆ

**æ–¹æ³• Bï¼šå‰ç«¯æ³¨å†Œï¼ˆæœ€ç®€å•ï¼‰**

1. è®¿é—®å‰ç«¯æ³¨å†Œé¡µé¢
2. æ³¨å†Œä¸€ä¸ªæµ‹è¯•ç”¨æˆ·ï¼ˆå¦‚ï¼štest@example.comï¼‰
3. å®Œæˆæ³¨å†Œåï¼Œç”¨æˆ· ID ä¼šè‡ªåŠ¨ç”Ÿæˆ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤ 1ï¼šæ£€æŸ¥æ˜¯å¦æœ‰ç”¨æˆ·

```sql
SELECT id, email FROM auth.users LIMIT 1;
```

### æ­¥éª¤ 2ï¼šå¦‚æœæ²¡æœ‰ç”¨æˆ·ï¼Œå…ˆæ³¨å†Œä¸€ä¸ª

åœ¨å‰ç«¯æ³¨å†Œé¡µé¢æ³¨å†Œä¸€ä¸ªæµ‹è¯•ç”¨æˆ·ã€‚

### æ­¥éª¤ 3ï¼šæ’å…¥æµ‹è¯•æ•°æ®

åœ¨ Supabase Dashboard â†’ SQL Editor ä¸­æ‰§è¡Œï¼š

```sql
-- æ‰§è¡Œ insert-test-data-quick.sql
-- è„šæœ¬ä¼šè‡ªåŠ¨è·å–ç”¨æˆ· ID å¹¶æ’å…¥æµ‹è¯•æ•°æ®
```

### æ­¥éª¤ 4ï¼šéªŒè¯æ•°æ®

```sql
-- æŸ¥çœ‹è®¢é˜…
SELECT * FROM public.subscriptions WHERE lemon_squeezy_subscription_id LIKE 'test_%';

-- æŸ¥çœ‹æ”¯ä»˜è®°å½•
SELECT * FROM public.payment_records WHERE lemon_squeezy_order_id LIKE 'test_%';
```

## âœ… æ€»ç»“

**æœ€ä½³å®è·µï¼š**

1. âœ… ä½¿ç”¨è‡ªåŠ¨è·å–è„šæœ¬ï¼ˆ`insert-test-data-quick.sql`ï¼‰
2. âœ… å¦‚æœæ²¡æœ‰ç”¨æˆ·ï¼Œå…ˆåœ¨å‰ç«¯æ³¨å†Œä¸€ä¸ªæµ‹è¯•ç”¨æˆ·
3. âœ… è®© Supabase Auth è‡ªåŠ¨ç”Ÿæˆç”¨æˆ· UUID

**é¿å…ï¼š**

- âŒ æ‰‹åŠ¨ç”Ÿæˆ UUIDï¼ˆä¼šå¯¼è‡´å¤–é”®çº¦æŸå¤±è´¥ï¼‰
- âŒ ç›´æ¥æ“ä½œ `auth.users` è¡¨ï¼ˆé™¤éæœ‰è¶…çº§ç®¡ç†å‘˜æƒé™ï¼‰
