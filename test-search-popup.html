<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>测试搜索弹窗</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 50%, #4facfe 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
        }
        h1 {
            color: #1f2937;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            background: #f9fafb;
        }
        .test-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
            transition: background-color 0.2s;
        }
        .test-button:hover {
            background: #2563eb;
        }
        .status {
            margin-top: 20px;
            padding: 10px;
            border-radius: 4px;
            font-weight: 500;
        }
        .success {
            background: #dcfce7;
            color: #166534;
            border: 1px solid #bbf7d0;
        }
        .error {
            background: #fef2f2;
            color: #991b1b;
            border: 1px solid #fecaca;
        }
        .info {
            background: #eff6ff;
            color: #1e40af;
            border: 1px solid #bfdbfe;
        }
        pre {
            background: #1f2937;
            color: #f9fafb;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔍 AcuityBookmarks 搜索弹窗测试</h1>

        <div class="test-section">
            <h2>✨ 最新优化特点</h2>
            <ul>
                <li>🎯 完全移除搜索框周围的空白间距</li>
                <li>📐 窗口完美居中显示，不再出现在左上角</li>
                <li>🪟 无边框窗口样式，接近原生popup体验</li>
                <li>🎨 紧凑的结果列表，信息密度更高</li>
                <li>⚡ 更流畅的响应速度和视觉效果</li>
                <li>📱 响应式设计，支持各种屏幕尺寸</li>
            </ul>
        </div>

        <div class="test-section">
            <h2>📋 测试步骤</h2>
            <ol>
                <li>重新加载 Chrome 扩展</li>
                <li>在任意网页中按 <code>Alt+F</code></li>
                <li>体验全新的极简搜索界面</li>
            </ol>
        </div>

        <div class="test-section">
            <h2>🛠️ 手动测试</h2>
            <p>点击下方按钮直接打开搜索弹窗页面：</p>
            <button class="test-button" onclick="openSearchPopup()">
                🚀 打开搜索弹窗
            </button>
            <div id="status" class="status info">
                点击上方按钮测试搜索弹窗
            </div>
        </div>

        <div class="test-section">
            <h2>📝 故障排除</h2>
            <p>如果无法访问搜索弹窗，请检查：</p>
            <ul>
                <li>✅ 扩展是否已重新加载</li>
                <li>✅ manifest.json 中是否有以下权限：<code>windows</code>, <code>system.display</code></li>
                <li>✅ dist/search-popup.html 文件是否存在</li>
                <li>✅ 窗口是否在屏幕中央显示（不是左上角）</li>
                <li>✅ 搜索框周围是否有大片空白</li>
                <li>✅ 控制台是否有错误信息</li>
            </ul>
        </div>

        <div class="test-section">
            <h2>🔧 技术信息</h2>
            <p><strong>文件路径：</strong> <code>dist/search-popup.html</code></p>
            <p><strong>快捷键：</strong> <code>Alt+F</code></p>
            <p><strong>窗口大小：</strong> 650x500px</p>
            <p><strong>权限要求：</strong> windows, bookmarks, storage, system.display</p>
            <p><strong>居中方式：</strong> 使用 chrome.system.display API 获取屏幕信息</p>
            <p><strong>窗口类型：</strong> popup（无边框样式）</p>
            <p><strong>响应式：</strong> 自适应各种屏幕尺寸</p>
        </div>

        <div class="test-section">
            <h2>🎨 最新设计亮点</h2>
            <ul>
                <li>🎯 完全移除搜索框周围的空白，界面更加紧凑</li>
                <li>📐 使用 chrome.system.display API 实现精确居中</li>
                <li>🪟 采用 popup 窗口类型，接近原生无边框体验</li>
                <li>🎨 紧凑的结果项设计（6px padding），信息密度大幅提升</li>
                <li>⚡ 优化了下拉列表样式，视觉层次更加清晰</li>
                <li>📱 响应式布局，完美适配各种屏幕尺寸</li>
                <li>🎪 毛玻璃背景效果，现代化视觉体验</li>
                <li>🚀 移除了所有不必要的装饰元素</li>
            </ul>
        </div>
    </div>

    <script>
        function openSearchPopup() {
            const status = document.getElementById('status');

            // 检查是否在扩展环境中
            if (typeof chrome !== 'undefined' && chrome.runtime) {
                try {
                    const searchPopupUrl = chrome.runtime.getURL('dist/search-popup.html');
                    chrome.windows.create({
                        url: searchPopupUrl,
                        type: 'popup',
                        width: 650,
                        height: 500,
                        focused: true
                    });
                    status.className = 'status success';
                    status.textContent = '✅ 搜索弹窗已打开！';
                } catch (error) {
                    status.className = 'status error';
                    status.textContent = '❌ 打开失败: ' + error.message;
                }
            } else {
                status.className = 'status error';
                status.textContent = '❌ 错误: 不在扩展环境中，请在扩展弹出窗口中测试';
            }
        }

        // 页面加载时的检查
        window.addEventListener('load', function() {
            const status = document.getElementById('status');

            if (typeof chrome === 'undefined' || !chrome.runtime) {
                status.className = 'status error';
                status.textContent = '⚠️ 警告: 不在扩展环境中，此页面仅用于测试目的';
            }
        });
    </script>
</body>
</html>
