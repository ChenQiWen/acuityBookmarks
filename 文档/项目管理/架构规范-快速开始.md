# ğŸš€ æ¶æ„è§„èŒƒ - å¿«é€Ÿå¼€å§‹æŒ‡å—

> 5åˆ†é’Ÿå¿«é€Ÿäº†è§£æ–°çš„æ¶æ„è§„èŒƒå’Œç»„ä»¶ä½“ç³»

---

## ğŸ“‹ æ ¸å¿ƒæ”¹è¿›

### 1ï¸âƒ£ é¡µé¢ç»Ÿä¸€æ•´åˆåˆ° `src/pages/`

**ä¹‹å‰**:

```
src/
â”œâ”€â”€ popup/
â”œâ”€â”€ side-panel/
â”œâ”€â”€ management/
â”œâ”€â”€ auth/
â””â”€â”€ settings/
```

**ç°åœ¨ï¼ˆè§„åˆ’ä¸­ï¼‰**:

```
src/
â””â”€â”€ pages/
    â”œâ”€â”€ popup/
    â”œâ”€â”€ side-panel/
    â”œâ”€â”€ management/
    â”œâ”€â”€ auth/
    â””â”€â”€ settings/
```

---

### 2ï¸âƒ£ ç»„ä»¶åˆ†ç±»ç®¡ç†

**åŸºç¡€ UI ç»„ä»¶** (`components/base/`)

- çº¯å±•ç¤ºç»„ä»¶ï¼Œæ— ä¸šåŠ¡é€»è¾‘
- ä¾‹å¦‚ï¼šButton, Input, Checkbox

**å¤åˆç»„ä»¶** (`components/composite/`)

- åŒ…å«ä¸šåŠ¡é€»è¾‘çš„ç»„ä»¶
- ä¾‹å¦‚ï¼šBookmarkTree, SearchPanel

---

### 3ï¸âƒ£ å®Œå–„çš„ç»„ä»¶è§„èŒƒ

æ¯ä¸ªç»„ä»¶å¿…é¡»åŒ…å«ï¼š

```
Component/
â”œâ”€â”€ Component.vue       # âœ… ç»„ä»¶å®ç°
â”œâ”€â”€ Component.types.ts  # âœ… TypeScript ç±»å‹
â””â”€â”€ README.md           # âœ… ä½¿ç”¨æ–‡æ¡£
```

---

## ğŸ› ï¸ å¿«é€Ÿä½¿ç”¨

### åˆ›å»ºåŸºç¡€ç»„ä»¶

```bash
# 1. è¿è¡Œè„šæœ¬
cd /Users/cqw/Documents/github/acuityBookmarks
./frontend/scripts/create-base-component.sh MyButton

# 2. å®ç°ç»„ä»¶
# ç¼–è¾‘ frontend/src/components/base/MyButton/MyButton.vue

# 3. å¯¼å‡ºç»„ä»¶
# åœ¨ components/index.ts ä¸­æ·»åŠ å¯¼å‡º

# 4. ä½¿ç”¨ç»„ä»¶
import { MyButton } from '@/components'
```

---

### åˆ›å»ºå¤åˆç»„ä»¶

```bash
# 1. è¿è¡Œè„šæœ¬
./frontend/scripts/create-composite-component.sh SearchPanel

# 2. å®ç°ç»„ä»¶é€»è¾‘
# ç¼–è¾‘ frontend/src/components/composite/SearchPanel/SearchPanel.vue

# 3. ä½¿ç”¨ç»„ä»¶
import { SearchPanel } from '@/components'
```

---

### åˆ›å»ºé¡µé¢

```bash
# 1. è¿è¡Œè„šæœ¬
./frontend/scripts/create-page.sh my-feature

# 2. æ›´æ–° vite.config.ts
# æ·»åŠ é¡µé¢å…¥å£é…ç½®

# 3. å®ç°é¡µé¢
# ç¼–è¾‘ frontend/src/pages/my-feature/MyFeature.vue
```

---

## ğŸ“ æ¶æ„åŸåˆ™

### å››å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Presentation (è¡¨ç°å±‚)   â”‚  â† stores/, components/, pages/
â”‚  åªç®¡ç† UI çŠ¶æ€           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“ ä¾èµ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Application (åº”ç”¨å±‚)    â”‚  â† application/
â”‚  ç”¨ä¾‹ç¼–æ’                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“ ä¾èµ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Core (æ ¸å¿ƒä¸šåŠ¡å±‚)       â”‚  â† core/
â”‚  æ¡†æ¶æ— å…³çš„ä¸šåŠ¡é€»è¾‘       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“ ä¾èµ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Infrastructure (åŸºç¡€)  â”‚  â† infrastructure/
â”‚  æŠ€æœ¯å®ç°ï¼ˆå¯æ›¿æ¢ï¼‰       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### å•å‘æ•°æ®æµ

```
Chrome API â†’ Background â†’ IndexedDB â†’ UI
```

**å…³é”®è§„åˆ™**:

- âœ… UI åªä» IndexedDB è¯»å–
- âœ… UI åªå†™å…¥ Chrome API
- âŒ UI ä¸ç›´æ¥è¯» Chrome API
- âŒ UI ä¸ç›´æ¥å†™ IndexedDB

---

## ğŸ¯ ç»„ä»¶å¼€å‘è§„èŒƒ

### åŸºç¡€ç»„ä»¶ç¤ºä¾‹

```vue
<!-- components/base/Button/Button.vue -->
<script setup lang="ts">
import type { ButtonProps, ButtonEmits } from './Button.types'

const props = withDefaults(defineProps<ButtonProps>(), {
  variant: 'primary',
  size: 'md'
})

const emit = defineEmits<ButtonEmits>()
</script>

<template>
  <button
    class="button"
    :class="[`button--${variant}`, `button--${size}`]"
    @click="emit('click', $event)"
  >
    <slot />
  </button>
</template>
```

**ç±»å‹å®šä¹‰**:

```typescript
// components/base/Button/Button.types.ts
export interface ButtonProps {
  variant?: 'primary' | 'secondary'
  size?: 'sm' | 'md' | 'lg'
}

export interface ButtonEmits {
  (event: 'click', e: MouseEvent): void
}
```

---

### å¤åˆç»„ä»¶ç¤ºä¾‹

```vue
<!-- components/composite/SearchPanel/SearchPanel.vue -->
<script setup lang="ts">
import { inject } from 'vue'
import { Button, Input } from '@/components'
import type { SearchAppService } from '@/application/search/search-app-service'

// âœ… é€šè¿‡ inject è·å–æœåŠ¡
const searchApp = inject<SearchAppService>('searchApp')

const handleSearch = async (query: string) => {
  // âœ… é€šè¿‡åº”ç”¨æœåŠ¡å¤„ç†ä¸šåŠ¡é€»è¾‘
  const result = await searchApp?.search(query)
  // ...
}
</script>

<template>
  <div class="search-panel">
    <Input v-model="query" placeholder="æœç´¢..." />
    <Button @click="handleSearch(query)">æœç´¢</Button>
  </div>
</template>
```

---

## ğŸ“‚ ç›®å½•å®šä½é€ŸæŸ¥

| ç›®å½•                    | ç”¨é€”                     | ç¤ºä¾‹                      |
| ----------------------- | ------------------------ | ------------------------- |
| `core/`                 | æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆæ¡†æ¶æ— å…³ï¼‰ | ä¹¦ç­¾æ ‘è½¬æ¢ã€å·®å¼‚æ¯”å¯¹      |
| `infrastructure/`       | æŠ€æœ¯å®ç°ï¼ˆå¯æ›¿æ¢ï¼‰       | IndexedDBã€Chrome API     |
| `application/`          | ç”¨ä¾‹ç¼–æ’                 | ä¹¦ç­¾åº”ç”¨æœåŠ¡ã€æœç´¢æœåŠ¡    |
| `stores/`               | UI çŠ¶æ€ç®¡ç†              | åŠ è½½çŠ¶æ€ã€é€‰ä¸­é¡¹          |
| `components/base/`      | åŸºç¡€ UI ç»„ä»¶             | Button, Input, Icon       |
| `components/composite/` | å¤åˆç»„ä»¶                 | BookmarkTree, SearchPanel |
| `pages/`                | é¡µé¢å…¥å£                 | popup, management         |
| `composables/`          | å¯å¤ç”¨é€»è¾‘               | useLazyFavicon            |
| `services/`             | ç‰¹æ®ŠæœåŠ¡ï¼ˆLegacyï¼‰       | bookmark-sync-service     |
| `utils-legacy/`         | é—ç•™ä»£ç                  | IndexedDB ç›¸å…³            |

---

## âš ï¸ å¸¸è§é”™è¯¯

### âŒ é”™è¯¯åšæ³•

```vue
<script setup lang="ts">
// âŒ UI ç›´æ¥è¯» Chrome API
const tree = await chrome.bookmarks.getTree()

// âŒ UI ç›´æ¥å†™ IndexedDB
await indexedDBManager.updateBookmark(...)

// âŒ Store åŒ…å«å¤æ‚ä¸šåŠ¡é€»è¾‘
const compareAndDiff = (tree1, tree2) => {
  // 200è¡Œçš„æ ‘æ¯”å¯¹ç®—æ³•
}

// âŒ åŸºç¡€ç»„ä»¶åŒ…å«ä¸šåŠ¡é€»è¾‘
const bookmarks = await loadBookmarks()
</script>
```

### âœ… æ­£ç¡®åšæ³•

```vue
<script setup lang="ts">
// âœ… ä» IndexedDB è¯»å–
const bookmarks = await indexedDBManager.getAllBookmarks()

// âœ… å†™å…¥ Chrome APIï¼ˆBackground ä¼šè‡ªåŠ¨åŒæ­¥ï¼‰
await chrome.bookmarks.create({ title: 'New' })

// âœ… Store åªç®¡ç† UI çŠ¶æ€ï¼Œå§”æ‰˜ä¸šåŠ¡é€»è¾‘ç»™æœåŠ¡
const loadData = async () => {
  isLoading.value = true
  const result = await bookmarkApp.getBookmarkTree()
  if (result.ok) {
    tree.value = result.value
  }
  isLoading.value = false
}

// âœ… åŸºç¡€ç»„ä»¶çº¯å±•ç¤ºï¼Œé€šè¿‡ props æ¥æ”¶æ•°æ®
const props = defineProps<{ items: BookmarkNode[] }>()
</script>
```

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£

- **æ¶æ„æ€»è§ˆ**: [srcç›®å½•æ¶æ„è¯´æ˜.md](./srcç›®å½•æ¶æ„è¯´æ˜.md)
- **é‡æ„æ–¹æ¡ˆ**: [ç»„ä»¶ä¸é¡µé¢è§„èŒƒåŒ–æ–¹æ¡ˆ.md](./ç»„ä»¶ä¸é¡µé¢è§„èŒƒåŒ–æ–¹æ¡ˆ.md)
- **è„šæœ¬ä½¿ç”¨**: [frontend/scripts/README.md](../../frontend/scripts/README.md)
- **æ•°æ®æµ**: [å•å‘æ•°æ®æµæ¶æ„è¯´æ˜.md](../../å•å‘æ•°æ®æµæ¶æ„è¯´æ˜.md)

---

## ğŸ“ æ–°äººä¸Šæ‰‹è·¯å¾„

1. **ç¬¬ä¸€æ­¥**: é˜…è¯»æœ¬æ–‡æ¡£ï¼ˆ5åˆ†é’Ÿï¼‰
2. **ç¬¬äºŒæ­¥**: æŸ¥çœ‹ [srcç›®å½•æ¶æ„è¯´æ˜.md](./srcç›®å½•æ¶æ„è¯´æ˜.md)ï¼ˆ15åˆ†é’Ÿï¼‰
3. **ç¬¬ä¸‰æ­¥**: å°è¯•åˆ›å»ºä¸€ä¸ªåŸºç¡€ç»„ä»¶ï¼ˆ30åˆ†é’Ÿï¼‰
   ```bash
   ./frontend/scripts/create-base-component.sh TestButton
   ```
4. **ç¬¬å››æ­¥**: æŸ¥çœ‹ç°æœ‰ä»£ç ç¤ºä¾‹
   - åŸºç¡€ç»„ä»¶ï¼š`components/ui/Button.vue`
   - å¤åˆç»„ä»¶ï¼š`components/SimpleBookmarkTree.vue`
   - é¡µé¢ï¼š`management/Management.vue`

---

## ğŸš€ å¼€å§‹è¡ŒåŠ¨

### ç«‹å³å¯ä»¥åšçš„äº‹

1. **åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªè§„èŒƒåŒ–ç»„ä»¶**

   ```bash
   cd /Users/cqw/Documents/github/acuityBookmarks
   ./frontend/scripts/create-base-component.sh MyFirstComponent
   ```

2. **æŸ¥çœ‹ç”Ÿæˆçš„æ–‡ä»¶**

   ```bash
   ls -la frontend/src/components/base/MyFirstComponent/
   ```

3. **å¼€å§‹å®ç°ç»„ä»¶**
   - ç¼–è¾‘ `MyFirstComponent.vue`
   - å®Œå–„ `MyFirstComponent.types.ts`
   - æ›´æ–° `README.md`

---

## â“ å¸¸è§é—®é¢˜

**Q: ç°æœ‰ç»„ä»¶éœ€è¦ç«‹å³è¿ç§»å—ï¼Ÿ**
A: ä¸éœ€è¦ã€‚å¯ä»¥é€æ­¥è¿ç§»ï¼Œæ–°æ—§ä»£ç å¯ä»¥å¹¶å­˜ã€‚

**Q: åŸºç¡€ç»„ä»¶å’Œå¤åˆç»„ä»¶å¦‚ä½•åŒºåˆ†ï¼Ÿ**
A: åŸºç¡€ç»„ä»¶æ— ä¸šåŠ¡é€»è¾‘ï¼Œå¯åœ¨ä»»ä½•é¡¹ç›®å¤ç”¨ï¼›å¤åˆç»„ä»¶åŒ…å«ä¸šåŠ¡é€»è¾‘ã€‚

**Q: é¡µé¢ä½•æ—¶è¿ç§»åˆ° pages ç›®å½•ï¼Ÿ**
A: æŒ‰ç…§è¿ç§»è®¡åˆ’é€æ­¥è¿›è¡Œï¼Œé¢„è®¡ 2-3 å‘¨å®Œæˆã€‚

**Q: å¦‚ä½•ç¡®ä¿éµå¾ªå•å‘æ•°æ®æµï¼Ÿ**
A: è®°ä½ï¼šChrome API â†’ IndexedDB â†’ UIï¼Œæ°¸è¿œä¸é€†å‘ï¼

---

## ğŸ‰ æ€»ç»“

### æ ¸å¿ƒè¦ç‚¹

1. âœ… é¡µé¢ç»Ÿä¸€æ”¾åœ¨ `pages/` ç›®å½•
2. âœ… ç»„ä»¶åˆ†ä¸º `base/`ï¼ˆçº¯UIï¼‰å’Œ `composite/`ï¼ˆä¸šåŠ¡ï¼‰
3. âœ… æ¯ä¸ªç»„ä»¶éƒ½æœ‰ç±»å‹æ–‡ä»¶å’Œæ–‡æ¡£
4. âœ… ä½¿ç”¨è„šæœ¬å¿«é€Ÿåˆ›å»ºè§„èŒƒåŒ–ç»„ä»¶
5. âœ… éµå¾ªå•å‘æ•°æ®æµåŸåˆ™

### ç«‹å³è¡ŒåŠ¨

```bash
# åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªè§„èŒƒåŒ–ç»„ä»¶
./frontend/scripts/create-base-component.sh MyComponent

# å¼€å§‹ç¼–ç ï¼
```

---

**æœ‰é—®é¢˜ï¼Ÿ** æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£æˆ–æäº¤ Issue  
**å¼€å§‹å§ï¼** ğŸš€
