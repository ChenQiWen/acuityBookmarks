# ğŸ“Œ æ¶æ„ä¼˜åŒ–é€ŸæŸ¥è¡¨

> **å¿«é€Ÿå‚è€ƒ**: é¡¹ç›®ä¼˜åŒ–çš„å…³é”®é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
> **é˜…è¯»æ—¶é—´**: 5 åˆ†é’Ÿ
> **è¯¦ç»†æŠ¥å‘Š**: å‚è§ã€Šä»£ç æ¶æ„å®¡æ ¸æŠ¥å‘Š.mdã€‹å’Œã€Šæ¶æ„ä¼˜åŒ–å®æ–½æŒ‡å—.mdã€‹

---

## ğŸš¨ TOP 5 å…³é”®é—®é¢˜

### 1ï¸âƒ£ utils/ ç›®å½•èŒè´£æ··ä¹± â­â­â­â­â­

**é—®é¢˜**: 24ä¸ªæ–‡ä»¶ï¼Œ11000+è¡Œä»£ç ï¼ŒåŒ…å«ä¸šåŠ¡é€»è¾‘ã€APIã€æœåŠ¡å±‚
**å½±å“**: æ–°äººéš¾ä¸Šæ‰‹ï¼Œä»£ç éš¾ç»´æŠ¤ï¼Œæµ‹è¯•å›°éš¾
**è§£å†³**: æŒ‰åˆ†å±‚æ¶æ„é‡æ„ä¸º `core/`ã€`infrastructure/`ã€`application/`

### 2ï¸âƒ£ Store åŒ…å«è¿‡å¤šä¸šåŠ¡é€»è¾‘ â­â­â­â­

**é—®é¢˜**: management-store.ts åŒ…å«æ ‘è½¬æ¢ã€ç¼“å­˜ã€ç®—æ³•ç­‰å¤æ‚é€»è¾‘
**å½±å“**: Store è‡ƒè‚¿ï¼Œä¸šåŠ¡é€»è¾‘æ— æ³•å•ç‹¬æµ‹è¯•
**è§£å†³**: æŠ½å–ä¸šåŠ¡é€»è¾‘åˆ°æœåŠ¡å±‚ï¼ŒStore åªç®¡ç† UI çŠ¶æ€

### 3ï¸âƒ£ å¤šå¥—æœç´¢ç³»ç»Ÿå¹¶å­˜ â­â­â­â­

**é—®é¢˜**: hybrid-searchã€fuse-searchã€useBookmarkSearch ç­‰å¤šå¥—å®ç°
**å½±å“**: ç»´æŠ¤æˆæœ¬é«˜ï¼ŒåŠŸèƒ½ä¸ä¸€è‡´
**è§£å†³**: ç»Ÿä¸€ä¸ºä¸€ä¸ªæœç´¢å¼•æ“ + ç­–ç•¥æ¨¡å¼

### 4ï¸âƒ£ é”™è¯¯å¤„ç†ä¸ç»Ÿä¸€ â­â­â­â­

**é—®é¢˜**: ä¸‰ç§é”™è¯¯å¤„ç†æ–¹å¼å¹¶å­˜ (è¿”å›å¯¹è±¡ã€æŠ›å¼‚å¸¸ã€è¿”å›null)
**å½±å“**: è°ƒç”¨æ–¹ä¸çŸ¥å¦‚ä½•å¤„ç†é”™è¯¯
**è§£å†³**: ç»Ÿä¸€ä½¿ç”¨ Result<T, E> æ¨¡å¼

### 5ï¸âƒ£ æ–‡ä»¶å‘½åä¸ä¸€è‡´ â­â­â­

**é—®é¢˜**: smart-_, unified-_, lightweight-_, modern-_ ç­‰æ¨¡ç³Šå‘½å
**å½±å“**: å¼€å‘è€…éœ€è¦æ‰“å¼€æ–‡ä»¶æ‰çŸ¥é“å†…å®¹
**è§£å†³**: ä½¿ç”¨æ¸…æ™°çš„ã€åæ˜ èŒè´£çš„å‘½å

---

## ğŸ“ å»ºè®®çš„æ–°ç›®å½•ç»“æ„

```
frontend/src/
â”œâ”€â”€ core/                      # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ (æ¡†æ¶æ— å…³)
â”‚   â”œâ”€â”€ bookmark/
â”‚   â”‚   â”œâ”€â”€ domain/           # é¢†åŸŸæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ services/         # é¢†åŸŸæœåŠ¡
â”‚   â”‚   â””â”€â”€ repositories/     # æ•°æ®è®¿é—®æ¥å£
â”‚   â”œâ”€â”€ search/
â”‚   â”‚   â”œâ”€â”€ engine.ts
â”‚   â”‚   â””â”€â”€ strategies/
â”‚   â””â”€â”€ common/
â”‚       â””â”€â”€ result.ts         # Result ç±»å‹å®šä¹‰
â”‚
â”œâ”€â”€ infrastructure/            # åŸºç¡€è®¾æ–½ (å¯æ›¿æ¢çš„æŠ€æœ¯å®ç°)
â”‚   â”œâ”€â”€ indexeddb/
â”‚   â”‚   â”œâ”€â”€ manager.ts
â”‚   â”‚   â”œâ”€â”€ connection-pool.ts
â”‚   â”‚   â””â”€â”€ schema.ts
â”‚   â”œâ”€â”€ chrome-api/
â”‚   â”‚   â””â”€â”€ wrapper.ts
â”‚   â””â”€â”€ logging/
â”‚       â””â”€â”€ logger.ts
â”‚
â”œâ”€â”€ application/              # åº”ç”¨æœåŠ¡ (ç”¨ä¾‹ç¼–æ’)
â”‚   â”œâ”€â”€ bookmark/
â”‚   â”‚   â””â”€â”€ bookmark-app-service.ts
â”‚   â””â”€â”€ search/
â”‚       â””â”€â”€ search-app-service.ts
â”‚
â”œâ”€â”€ presentation/             # è¡¨ç°å±‚ (UI)
â”‚   â”œâ”€â”€ stores/              # åªç®¡ç† UI çŠ¶æ€
â”‚   â”œâ”€â”€ composables/         # UI é€»è¾‘å¤ç”¨
â”‚   â””â”€â”€ components/
â”‚
â””â”€â”€ utils/                   # çº¯å·¥å…·å‡½æ•° (æ— çŠ¶æ€)
    â”œâ”€â”€ array-helpers.ts
    â”œâ”€â”€ string-helpers.ts
    â””â”€â”€ validators.ts
```

---

## ğŸ”„ æ–‡ä»¶è¿ç§»æ˜ å°„

### é«˜ä¼˜å…ˆçº§è¿ç§»

| æ—§ä½ç½®                                | æ–°ä½ç½®                                                  | ç†ç”±                   |
| ------------------------------------- | ------------------------------------------------------- | ---------------------- |
| `utils/unified-bookmark-api.ts`       | `core/bookmark/repositories/` + `application/bookmark/` | æ‹†åˆ†æ•°æ®è®¿é—®å’Œåº”ç”¨é€»è¾‘ |
| `utils/smart-bookmark-manager.ts`     | `core/bookmark/services/bookmark-service.ts`            | ä¸šåŠ¡é€»è¾‘åº”åœ¨ core      |
| `utils/smart-bookmark-executor.ts`    | `core/bookmark/services/bookmark-executor.ts`           | ä¸šåŠ¡é€»è¾‘åº”åœ¨ core      |
| `utils/smart-bookmark-diff-engine.ts` | `core/bookmark/services/bookmark-differ.ts`             | æ ¸å¿ƒç®—æ³•åº”åœ¨ core      |
| `services/hybrid-search-engine.ts`    | `core/search/engine.ts`                                 | æ ¸å¿ƒæœç´¢å¼•æ“           |
| `services/fuse-search.ts`             | `core/search/strategies/fuse-strategy.ts`               | æœç´¢ç­–ç•¥               |
| `utils/indexeddb-manager.ts`          | `infrastructure/indexeddb/manager.ts`                   | åŸºç¡€è®¾æ–½               |
| `utils/chrome-api.ts`                 | `infrastructure/chrome-api/wrapper.ts`                  | åŸºç¡€è®¾æ–½               |
| `utils/logger.ts`                     | `infrastructure/logging/logger.ts`                      | åŸºç¡€è®¾æ–½               |

### ä¸­ä¼˜å…ˆçº§è¿ç§»

| æ—§ä½ç½®                                      | æ–°ä½ç½®                                         |
| ------------------------------------------- | ---------------------------------------------- |
| `utils/operation-tracker.ts`                | `infrastructure/tracking/operation-tracker.ts` |
| `utils/favicon-manager.ts`                  | `application/ui/favicon-service.ts`            |
| `services/lightweight-bookmark-enhancer.ts` | `application/bookmark/bookmark-enhancer.ts`    |

---

## ğŸ¯ ä¼˜åŒ–ä¼˜å…ˆçº§

### ğŸ”´ ç«‹å³æ‰§è¡Œ (1-2å‘¨)

1. **é‡æ„ utils ç›®å½•** - å»ºç«‹åˆ†å±‚æ¶æ„
2. **ç²¾ç®€ Store** - æŠ½å–ä¸šåŠ¡é€»è¾‘åˆ°æœåŠ¡å±‚
3. **ç»Ÿä¸€é”™è¯¯å¤„ç†** - ä½¿ç”¨ Result æ¨¡å¼

### ğŸŸ¡ 2å‘¨å†…æ‰§è¡Œ

4. **ç»Ÿä¸€æœç´¢ç³»ç»Ÿ** - å•ä¸€æœç´¢å¼•æ“ + ç­–ç•¥
5. **ä¼˜åŒ– IndexedDB** - è¿æ¥æ±  + äº‹åŠ¡ç®¡ç†
6. **æ–‡æ¡£æ›´æ–°** - åŒæ­¥æœ€æ–°æ¶æ„

### ğŸŸ¢ 1æœˆå†…æ‰§è¡Œ

7. **æ€§èƒ½ç›‘æ§** - å…³é”®è·¯å¾„ç›‘æ§
8. **å‡å°‘å•ä¾‹** - å¼•å…¥ä¾èµ–æ³¨å…¥
9. **ä»£ç æ¸…ç†** - ç§»é™¤é‡å¤å’ŒåºŸå¼ƒä»£ç 

---

## ğŸ’¡ æ ¸å¿ƒè®¾è®¡åŸåˆ™

### 1. åˆ†å±‚æ¶æ„

```
UI â†’ Application â†’ Core â†’ Infrastructure
     (åªèƒ½å‘ä¸‹ä¾èµ–ï¼Œä¸èƒ½å‘ä¸Šä¾èµ–)
```

### 2. å•ä¸€èŒè´£

- ä¸€ä¸ªç±»/æ–‡ä»¶åªåšä¸€ä»¶äº‹
- å‡½æ•°ä¸è¶…è¿‡ 50 è¡Œ
- ç±»ä¸è¶…è¿‡ 300 è¡Œ

### 3. ä¾èµ–å€’ç½®

```typescript
// âŒ ç›´æ¥ä¾èµ–å®ç°
class Service {
  private db = new IndexedDBManager()
}

// âœ… ä¾èµ–æ¥å£
class Service {
  constructor(private db: IDBManager) {}
}
```

### 4. ç»Ÿä¸€é”™è¯¯å¤„ç†

```typescript
// æ‰€æœ‰å¼‚æ­¥æ“ä½œè¿”å› Result
async function loadData(): Promise<Result<Data>> {
  try {
    return Result.ok(data)
  } catch (error) {
    return Result.err(error)
  }
}
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºç›®å½•ç»“æ„

```bash
cd frontend/src
mkdir -p core/{bookmark,search,common}
mkdir -p infrastructure/{indexeddb,chrome-api,logging}
mkdir -p application/{bookmark,search}
```

### ç¬¬äºŒæ­¥ï¼šè¿ç§»ç¬¬ä¸€ä¸ªæ–‡ä»¶

```bash
# å¤åˆ¶ (ä¿ç•™åŸæ–‡ä»¶)
cp utils/unified-bookmark-api.ts \
   core/bookmark/repositories/bookmark-repository.ts

# ç¼–è¾‘æ–°æ–‡ä»¶ï¼Œæ‹†åˆ†èŒè´£
# ...

# æ›´æ–° import
# ...

# éªŒè¯
bun run type-check
bun run build
```

### ç¬¬ä¸‰æ­¥ï¼šé€æ­¥è¿ç§»å…¶ä»–æ–‡ä»¶

- æ¯æ¬¡åªè¿ç§» 1-2 ä¸ªæ–‡ä»¶
- ç«‹å³æµ‹è¯•å’ŒéªŒè¯
- æ›´æ–°æ–‡æ¡£

---

## ğŸ“Š æˆåŠŸæŒ‡æ ‡

### ä»£ç è´¨é‡

- âœ… utils/ ç›®å½•æ–‡ä»¶æ•° < 10 ä¸ª
- âœ… utils/ ç›®å½•ä»£ç é‡ < 2000 è¡Œ
- âœ… Store æ–‡ä»¶ä»£ç é‡ < 300 è¡Œ/ä¸ª
- âœ… æœç´¢ç³»ç»Ÿåªæœ‰ä¸€ä¸ªå…¥å£

### æ¶æ„æ¸…æ™°åº¦

- âœ… åˆ†å±‚æ˜ç¡®ï¼Œä¾èµ–æ–¹å‘æ­£ç¡®
- âœ… èŒè´£å•ä¸€ï¼Œè¾¹ç•Œæ¸…æ™°
- âœ… å‘½åè§„èŒƒï¼Œå«ä¹‰æ˜ç¡®

### å¯ç»´æŠ¤æ€§

- âœ… æ–°äººä¸Šæ‰‹æ—¶é—´ < 2å¤©
- âœ… ä¿®æ”¹ä¸€ä¸ªåŠŸèƒ½åªéœ€æ”¹ 1-2 ä¸ªæ–‡ä»¶
- âœ… å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 60%

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### DO âœ…

- å°æ­¥é‡æ„ï¼ŒæŒç»­éªŒè¯
- ä¿æŒå‘åå…¼å®¹
- åŒæ­¥æ›´æ–°æ–‡æ¡£
- ä¸å›¢é˜Ÿæ²Ÿé€š

### DON'T âŒ

- å¤§çˆ†ç‚¸å¼é‡æ„
- è·³è¿‡æµ‹è¯•
- ç‹¬è‡ªè¡ŒåŠ¨
- è¿‡åº¦ä¼˜åŒ–

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- ğŸ“„ **ä»£ç æ¶æ„å®¡æ ¸æŠ¥å‘Š.md** - è¯¦ç»†é—®é¢˜åˆ†æ
- ğŸ“„ **æ¶æ„ä¼˜åŒ–å®æ–½æŒ‡å—.md** - åˆ†æ­¥å®æ–½æŒ‡å—
- ğŸ“„ **å…¨é¢ä¼˜åŒ–æŠ¥å‘Š.md** - å†å²ä¼˜åŒ–è®°å½•
- ğŸ“„ **å‰ç«¯ä¼˜åŒ–è®¡åˆ’.md** - æ•°æ®æ¶æ„ä¼˜åŒ–æ–¹æ¡ˆ

---

## ğŸ‰ é¢„æœŸæ”¶ç›Š

å®Œæˆä¼˜åŒ–åï¼š

- âœ… **å¯ç»´æŠ¤æ€§** +60%
- âœ… **å¯æµ‹è¯•æ€§** +80%
- âœ… **å¼€å‘æ•ˆç‡** +40%
- âœ… **æ–°äººä¸Šæ‰‹** +70%
- âœ… **ä»£ç è´¨é‡** +50%

---

**ä¸‹ä¸€æ­¥**: å¼€å§‹æ‰§è¡Œç¬¬ä¸€é˜¶æ®µ - é‡æ„ utils ç›®å½•ï¼
**å‚è€ƒ**: ã€Šæ¶æ„ä¼˜åŒ–å®æ–½æŒ‡å—.mdã€‹
