# ğŸ“¦ è§„èŒƒåŒ–ç»„ä»¶ç¤ºä¾‹

> å®Œæ•´çš„ç»„ä»¶å¼€å‘ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•åˆ›å»ºç¬¦åˆè§„èŒƒçš„ç»„ä»¶

---

## ç¤ºä¾‹ 1: åŸºç¡€ UI ç»„ä»¶ - Badge

### 1. åˆ›å»ºç»„ä»¶

```bash
./frontend/scripts/create-base-component.sh Badge
```

### 2. ç»„ä»¶å®ç° (`Badge.vue`)

```vue
<!--
  ğŸ“¦ Badge - å¾½ç« ç»„ä»¶
  
  åŠŸèƒ½ï¼šæ˜¾ç¤ºå°æ ‡ç­¾æˆ–å¾½ç« ï¼Œç”¨äºæ ‡è®°çŠ¶æ€ã€æ•°é‡ç­‰
  åˆ†ç±»ï¼šåŸºç¡€ UI ç»„ä»¶
  ä¾èµ–ï¼šæ— 
-->

<script setup lang="ts">
import type { BadgeProps } from './Badge.types'

const props = withDefaults(defineProps<BadgeProps>(), {
  variant: 'default',
  size: 'md',
  rounded: true
})

// è®¡ç®—æ ·å¼ç±»å
const badgeClasses = computed(() => [
  'badge',
  `badge--${props.variant}`,
  `badge--${props.size}`,
  {
    'badge--rounded': props.rounded,
    'badge--dot': props.dot
  }
])
</script>

<template>
  <span v-if="!dot" :class="badgeClasses">
    <slot />
  </span>
  <span v-else :class="badgeClasses" aria-label="çŠ¶æ€æŒ‡ç¤ºå™¨"></span>
</template>

<style scoped>
.badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: var(--badge-font-size, 12px);
  font-weight: 500;
  line-height: 1;
  white-space: nowrap;
  transition: all 0.2s;
}

/* å°ºå¯¸ */
.badge--sm {
  padding: 2px 6px;
  font-size: 10px;
  min-height: 16px;
}

.badge--md {
  padding: 4px 8px;
  font-size: 12px;
  min-height: 20px;
}

.badge--lg {
  padding: 6px 12px;
  font-size: 14px;
  min-height: 24px;
}

/* å˜ä½“ */
.badge--default {
  background: var(--color-surface-variant);
  color: var(--color-on-surface-variant);
}

.badge--primary {
  background: var(--color-primary);
  color: var(--color-on-primary);
}

.badge--success {
  background: var(--color-success);
  color: var(--color-on-success);
}

.badge--warning {
  background: var(--color-warning);
  color: var(--color-on-warning);
}

.badge--error {
  background: var(--color-error);
  color: var(--color-on-error);
}

/* åœ†è§’ */
.badge--rounded {
  border-radius: 12px;
}

/* ç‚¹çŠ¶å¾½ç«  */
.badge--dot {
  width: 8px;
  height: 8px;
  padding: 0;
  border-radius: 50%;
}
</style>
```

### 3. ç±»å‹å®šä¹‰ (`Badge.types.ts`)

```typescript
/**
 * ğŸ“¦ Badge - å¾½ç« ç»„ä»¶ç±»å‹å®šä¹‰
 */

/**
 * ç»„ä»¶ Props
 */
export interface BadgeProps {
  /**
   * å¾½ç« å˜ä½“
   * @default 'default'
   */
  variant?: 'default' | 'primary' | 'success' | 'warning' | 'error'

  /**
   * å¾½ç« å°ºå¯¸
   * @default 'md'
   */
  size?: 'sm' | 'md' | 'lg'

  /**
   * æ˜¯å¦åœ†è§’
   * @default true
   */
  rounded?: boolean

  /**
   * æ˜¯å¦æ˜¾ç¤ºä¸ºç‚¹çŠ¶ï¼ˆæ— å†…å®¹ï¼‰
   * @default false
   */
  dot?: boolean
}

/**
 * ç»„ä»¶ Emits
 */
export interface BadgeEmits {
  // æ— äº‹ä»¶
}
```

### 4. ä½¿ç”¨æ–‡æ¡£ (`README.md`)

```markdown
# Badge

## ğŸ“‹ æ¦‚è¿°

å¾½ç« ç»„ä»¶ï¼Œç”¨äºæ˜¾ç¤ºæ ‡ç­¾ã€çŠ¶æ€æŒ‡ç¤ºå™¨æˆ–è®¡æ•°ã€‚

## ğŸ“¦ åˆ†ç±»

- [x] åŸºç¡€ UI ç»„ä»¶
- [ ] å¤åˆç»„ä»¶

## ğŸ¯ ä½¿ç”¨åœºæ™¯

- æ˜¾ç¤ºæœªè¯»æ¶ˆæ¯æ•°é‡
- æ ‡è®°æ–°åŠŸèƒ½æˆ–æ–°å†…å®¹
- æ˜¾ç¤ºçŠ¶æ€ï¼ˆæˆåŠŸã€è­¦å‘Šã€é”™è¯¯ï¼‰
- ä½œä¸ºæ ‡ç­¾åˆ†ç±»å†…å®¹

## ğŸ“– API

### Props

| å±æ€§å    | ç±»å‹                                                          | é»˜è®¤å€¼      | å¿…å¡« | æè¿°           |
| --------- | ------------------------------------------------------------- | ----------- | ---- | -------------- |
| `variant` | `'default' \| 'primary' \| 'success' \| 'warning' \| 'error'` | `'default'` | å¦   | å¾½ç« å˜ä½“       |
| `size`    | `'sm' \| 'md' \| 'lg'`                                        | `'md'`      | å¦   | å¾½ç« å°ºå¯¸       |
| `rounded` | `boolean`                                                     | `true`      | å¦   | æ˜¯å¦åœ†è§’       |
| `dot`     | `boolean`                                                     | `false`     | å¦   | æ˜¯å¦æ˜¾ç¤ºä¸ºç‚¹çŠ¶ |

### Slots

| æ’æ§½å    | Props | æè¿°     |
| --------- | ----- | -------- |
| `default` | -     | å¾½ç« å†…å®¹ |

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ä½¿ç”¨

\`\`\`vue
<template>

  <div>
    <!-- é»˜è®¤å¾½ç«  -->
    <Badge>New</Badge>
    
    <!-- ä¸»è¦å¾½ç«  -->
    <Badge variant="primary">99+</Badge>
    
    <!-- æˆåŠŸå¾½ç«  -->
    <Badge variant="success">å·²å®Œæˆ</Badge>
    
    <!-- è­¦å‘Šå¾½ç«  -->
    <Badge variant="warning">å¾…å¤„ç†</Badge>
    
    <!-- é”™è¯¯å¾½ç«  -->
    <Badge variant="error">é”™è¯¯</Badge>
  </div>
</template>

<script setup lang="ts">
import { Badge } from '@/components'
</script>

\`\`\`

### ä¸åŒå°ºå¯¸

\`\`\`vue
<template>

  <div>
    <Badge size="sm">Small</Badge>
    <Badge size="md">Medium</Badge>
    <Badge size="lg">Large</Badge>
  </div>
</template>
\`\`\`

### ç‚¹çŠ¶å¾½ç« ï¼ˆçŠ¶æ€æŒ‡ç¤ºå™¨ï¼‰

\`\`\`vue
<template>

  <div style="display: flex; align-items: center; gap: 8px;">
    <Badge variant="success" dot />
    <span>åœ¨çº¿</span>
  </div>
</template>
\`\`\`

### ä¸å…¶ä»–ç»„ä»¶ç»„åˆ

\`\`\`vue
<template>
<Button>
æ¶ˆæ¯
<Badge variant="error" size="sm">5</Badge>
</Button>
</template>
\`\`\`

## ğŸ¨ æ ·å¼å®šåˆ¶

### CSS å˜é‡

| å˜é‡å               | é»˜è®¤å€¼ | æè¿°             |
| -------------------- | ------ | ---------------- |
| `--badge-font-size`  | `12px` | å­—ä½“å¤§å°         |
| `--color-primary`    | ä¸»é¢˜è‰² | ä¸»è¦å˜ä½“èƒŒæ™¯è‰²   |
| `--color-on-primary` | ç™½è‰²   | ä¸»è¦å˜ä½“æ–‡å­—é¢œè‰² |

### ç¤ºä¾‹

\`\`\`css
.custom-badge {
--badge-font-size: 14px;
}
\`\`\`

## ğŸ“¦ ä¾èµ–ç»„ä»¶

æ— 

## âš ï¸ æ³¨æ„äº‹é¡¹

- å¾½ç« å†…å®¹åº”ç®€çŸ­ï¼Œé€šå¸¸ä¸è¶…è¿‡ 3 ä¸ªå­—ç¬¦
- ä½¿ç”¨ç‚¹çŠ¶å¾½ç« æ—¶ï¼Œç¡®ä¿æœ‰é€‚å½“çš„ aria-label
- æ•°é‡è¶…è¿‡ 99 æ—¶ï¼Œå»ºè®®æ˜¾ç¤ºä¸º "99+"

## ğŸ”„ æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-10-14)

- åˆå§‹ç‰ˆæœ¬
```

### 5. å¯¼å‡ºç»„ä»¶

åœ¨ `components/index.ts` ä¸­æ·»åŠ ï¼š

```typescript
export { default as Badge } from './base/Badge/Badge.vue'
export type * from './base/Badge/Badge.types'
```

---

## ç¤ºä¾‹ 2: å¤åˆç»„ä»¶ - SearchPanel

### 1. åˆ›å»ºç»„ä»¶

```bash
./frontend/scripts/create-composite-component.sh SearchPanel
```

### 2. ç»„ä»¶å®ç° (`SearchPanel.vue`)

```vue
<!--
  ğŸ“¦ SearchPanel - æœç´¢é¢æ¿
  
  åŠŸèƒ½ï¼šæä¾›ä¹¦ç­¾æœç´¢åŠŸèƒ½ï¼ŒåŒ…å«æœç´¢è¾“å…¥ã€ç»“æœæ˜¾ç¤ºå’Œç­›é€‰
  åˆ†ç±»ï¼šå¤åˆç»„ä»¶
  ä¾èµ–ï¼šInput, Icon, List, Badge
-->

<script setup lang="ts">
import { ref, computed, inject } from 'vue'
import { Input, Icon, List, Badge } from '@/components'
import type { SearchAppService } from '@/application/search/search-app-service'
import type { SearchPanelProps, SearchPanelEmits } from './SearchPanel.types'

const props = withDefaults(defineProps<SearchPanelProps>(), {
  placeholder: 'æœç´¢ä¹¦ç­¾...',
  showCount: true
})

const emit = defineEmits<SearchPanelEmits>()

// æ³¨å…¥æœç´¢æœåŠ¡
const searchApp = inject<SearchAppService>('searchApp')

// çŠ¶æ€
const query = ref('')
const results = ref([])
const isSearching = ref(false)

// è®¡ç®—å±æ€§
const hasResults = computed(() => results.value.length > 0)
const resultCount = computed(() => results.value.length)

// æœç´¢æ–¹æ³•
const handleSearch = async (searchQuery: string) => {
  if (!searchQuery.trim()) {
    results.value = []
    return
  }

  isSearching.value = true

  try {
    // é€šè¿‡åº”ç”¨æœåŠ¡æ‰§è¡Œæœç´¢
    const searchResults = await searchApp?.search(searchQuery)
    results.value = searchResults || []

    // å‘é€æœç´¢å®Œæˆäº‹ä»¶
    emit('search', searchQuery, results.value)
  } catch (error) {
    console.error('æœç´¢å¤±è´¥:', error)
    results.value = []
  } finally {
    isSearching.value = false
  }
}

// é€‰æ‹©ç»“æœ
const handleSelectResult = (item: any) => {
  emit('select', item)
}

// æ¸…ç©ºæœç´¢
const handleClear = () => {
  query.value = ''
  results.value = []
  emit('clear')
}
</script>

<template>
  <div class="search-panel">
    <!-- æœç´¢è¾“å…¥ -->
    <div class="search-panel__input">
      <Input
        v-model="query"
        :placeholder="placeholder"
        @input="handleSearch(query)"
        @clear="handleClear"
      >
        <template #prefix>
          <Icon name="mdi-magnify" />
        </template>
      </Input>
    </div>

    <!-- ç»“æœè®¡æ•° -->
    <div v-if="showCount && hasResults" class="search-panel__count">
      æ‰¾åˆ° <Badge variant="primary" size="sm">{{ resultCount }}</Badge> ä¸ªç»“æœ
    </div>

    <!-- æœç´¢ç»“æœ -->
    <div class="search-panel__results">
      <List v-if="hasResults" :items="results" @item-click="handleSelectResult">
        <template #item="{ item }">
          <slot name="result" :item="item">
            {{ item.title }}
          </slot>
        </template>
      </List>

      <!-- ç©ºçŠ¶æ€ -->
      <div v-else-if="query && !isSearching" class="search-panel__empty">
        <Icon name="mdi-magnify-close" :size="48" />
        <p>æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„ç»“æœ</p>
      </div>

      <!-- åŠ è½½çŠ¶æ€ -->
      <div v-else-if="isSearching" class="search-panel__loading">
        <Icon name="mdi-loading" :size="24" spin />
        æœç´¢ä¸­...
      </div>
    </div>
  </div>
</template>

<style scoped>
.search-panel {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.search-panel__input {
  /* è¾“å…¥æ¡†æ ·å¼ */
}

.search-panel__count {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  color: var(--color-on-surface-variant);
}

.search-panel__results {
  min-height: 200px;
}

.search-panel__empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px 20px;
  color: var(--color-on-surface-variant);
  text-align: center;
}

.search-panel__loading {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 40px 20px;
  color: var(--color-on-surface-variant);
}
</style>
```

### 3. ç±»å‹å®šä¹‰ (`SearchPanel.types.ts`)

```typescript
/**
 * ğŸ“¦ SearchPanel - æœç´¢é¢æ¿ç±»å‹å®šä¹‰
 */

/**
 * ç»„ä»¶ Props
 */
export interface SearchPanelProps {
  /**
   * æœç´¢æ¡†å ä½ç¬¦
   * @default 'æœç´¢ä¹¦ç­¾...'
   */
  placeholder?: string

  /**
   * æ˜¯å¦æ˜¾ç¤ºç»“æœè®¡æ•°
   * @default true
   */
  showCount?: boolean
}

/**
 * ç»„ä»¶ Emits
 */
export interface SearchPanelEmits {
  /**
   * æœç´¢å®Œæˆäº‹ä»¶
   * @param query - æœç´¢å…³é”®è¯
   * @param results - æœç´¢ç»“æœ
   */
  (event: 'search', query: string, results: any[]): void

  /**
   * é€‰æ‹©ç»“æœäº‹ä»¶
   * @param item - é€‰ä¸­çš„é¡¹ç›®
   */
  (event: 'select', item: any): void

  /**
   * æ¸…ç©ºæœç´¢äº‹ä»¶
   */
  (event: 'clear'): void
}

/**
 * æœç´¢ç»“æœé¡¹
 */
export interface SearchResultItem {
  id: string
  title: string
  url?: string
  [key: string]: any
}
```

### 4. ä½¿ç”¨ç¤ºä¾‹

```vue
<template>
  <SearchPanel
    placeholder="æœç´¢æˆ‘çš„ä¹¦ç­¾..."
    :show-count="true"
    @search="handleSearch"
    @select="handleSelectBookmark"
    @clear="handleClear"
  >
    <!-- è‡ªå®šä¹‰ç»“æœæ˜¾ç¤º -->
    <template #result="{ item }">
      <div class="bookmark-result">
        <img :src="item.favicon" alt="" class="favicon" />
        <div class="info">
          <div class="title">{{ item.title }}</div>
          <div class="url">{{ item.url }}</div>
        </div>
      </div>
    </template>
  </SearchPanel>
</template>

<script setup lang="ts">
import { SearchPanel } from '@/components'

const handleSearch = (query: string, results: any[]) => {
  console.log(`æœç´¢ "${query}"ï¼Œæ‰¾åˆ° ${results.length} ä¸ªç»“æœ`)
}

const handleSelectBookmark = (item: any) => {
  console.log('é€‰ä¸­ä¹¦ç­¾:', item)
  // æ‰“å¼€ä¹¦ç­¾æˆ–å…¶ä»–æ“ä½œ
}

const handleClear = () => {
  console.log('æ¸…ç©ºæœç´¢')
}
</script>
```

---

## å…³é”®è¦ç‚¹æ€»ç»“

### åŸºç¡€ç»„ä»¶å¼€å‘

1. âœ… **æ— ä¸šåŠ¡é€»è¾‘** - çº¯å±•ç¤ºï¼Œå®Œå…¨å—æ§
2. âœ… **å®Œæ•´çš„ç±»å‹å®šä¹‰** - Props, Emits, Expose
3. âœ… **è¯¦ç»†çš„æ–‡æ¡£** - API è¯´æ˜å’Œä½¿ç”¨ç¤ºä¾‹
4. âœ… **CSS å˜é‡æ”¯æŒ** - æ–¹ä¾¿æ ·å¼å®šåˆ¶
5. âœ… **æ— éšœç¢æ”¯æŒ** - aria-label ç­‰

### å¤åˆç»„ä»¶å¼€å‘

1. âœ… **é€šè¿‡ inject è·å–æœåŠ¡** - ä¸ç›´æ¥è®¿é—®åº•å±‚ API
2. âœ… **ç»„åˆåŸºç¡€ç»„ä»¶** - å¤ç”¨å·²æœ‰çš„ UI ç»„ä»¶
3. âœ… **æä¾›æ’æ§½** - å…è®¸è‡ªå®šä¹‰å†…å®¹
4. âœ… **å‘é€è¯­ä¹‰åŒ–äº‹ä»¶** - è®©çˆ¶ç»„ä»¶çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆ
5. âœ… **å¤„ç†åŠ è½½å’Œé”™è¯¯çŠ¶æ€** - è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒ

---

**å¼€å§‹åˆ›å»ºä½ çš„è§„èŒƒåŒ–ç»„ä»¶å§ï¼** ğŸš€
